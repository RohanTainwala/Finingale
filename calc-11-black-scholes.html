<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Black-Scholes Options Calculator ‚Äî Finingale</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--navy:#0A1628;--navy2:#0E1F3D;--navy3:#162847;--gold:#C9A84C;--gold2:#E8C96B;--white:#F8F5EE;--grey:#8A95A3;--blue:#60a5fa;--green:#4ade80;--red:#f87171;--purple:#c084fc;}
body{font-family:'DM Sans',sans-serif;background:var(--navy);color:var(--white);min-height:100vh;padding:40px 24px;}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(201,168,76,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(201,168,76,0.03) 1px,transparent 1px);background-size:60px 60px;pointer-events:none;z-index:0;}
.wrapper{max-width:1080px;margin:0 auto;position:relative;z-index:1;}
.calc-header{margin-bottom:36px;}
.calc-tag{font-size:0.68rem;font-weight:600;letter-spacing:0.25em;text-transform:uppercase;color:var(--gold);display:flex;align-items:center;gap:10px;margin-bottom:10px;}
.calc-tag::before{content:'';width:22px;height:1px;background:var(--gold);}
.calc-title{font-family:'Playfair Display',serif;font-size:clamp(1.8rem,3.5vw,2.8rem);font-weight:900;line-height:1.1;margin-bottom:8px;}
.calc-title span{color:var(--gold);}
.calc-desc{font-size:0.88rem;color:var(--grey);font-weight:300;max-width:600px;line-height:1.75;}
.calc-body{display:grid;grid-template-columns:370px 1fr;gap:20px;align-items:start;}
@media(max-width:820px){.calc-body{grid-template-columns:1fr;}}
.panel{background:var(--navy2);border:1px solid rgba(201,168,76,0.13);border-radius:8px;padding:28px;}
.panel+.panel{margin-top:20px;}
.panel-title{font-size:0.68rem;font-weight:600;letter-spacing:0.2em;text-transform:uppercase;color:var(--gold);margin-bottom:20px;padding-bottom:12px;border-bottom:1px solid rgba(201,168,76,0.12);}
.input-group{margin-bottom:20px;}
.input-label{font-size:0.7rem;font-weight:600;letter-spacing:0.1em;text-transform:uppercase;color:var(--grey);margin-bottom:6px;display:block;}
.input-hint{font-size:0.65rem;color:rgba(138,149,163,0.6);margin-bottom:6px;display:block;}
.input-wrap{position:relative;display:flex;align-items:center;}
.input-prefix{position:absolute;left:14px;font-size:0.88rem;font-weight:600;color:var(--gold);pointer-events:none;z-index:1;}
.input-suffix{position:absolute;right:14px;font-size:0.88rem;font-weight:500;color:var(--grey);pointer-events:none;z-index:1;}
.field{width:100%;padding:12px 14px;background:var(--navy3);border:1px solid rgba(201,168,76,0.18);border-radius:5px;color:var(--white);font-size:0.95rem;font-weight:500;font-family:'DM Sans',sans-serif;outline:none;transition:border-color 0.2s,box-shadow 0.2s;-moz-appearance:textfield;}
.field::-webkit-outer-spin-button,.field::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}
.field:focus{border-color:var(--gold);box-shadow:0 0 0 3px rgba(201,168,76,0.1);}
.field.has-prefix{padding-left:32px;}
.field.has-suffix{padding-right:40px;}
.field.error{border-color:var(--red);}
.error-msg{font-size:0.65rem;color:var(--red);margin-top:5px;display:none;}
.error-msg.show{display:block;}
.toggle-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-top:6px;}
.toggle-btn{padding:10px;border:1px solid rgba(201,168,76,0.18);background:transparent;color:var(--grey);font-size:0.75rem;font-family:'DM Sans',sans-serif;border-radius:4px;cursor:pointer;transition:all 0.18s;text-align:center;}
.toggle-btn.active{background:var(--gold);color:var(--navy);border-color:var(--gold);font-weight:700;}
.toggle-btn:hover:not(.active){border-color:var(--gold);color:var(--gold);}
.calc-btn{width:100%;margin-top:8px;padding:14px;background:var(--gold);color:var(--navy);font-size:0.85rem;font-weight:700;font-family:'DM Sans',sans-serif;letter-spacing:0.1em;text-transform:uppercase;border:none;border-radius:5px;cursor:pointer;transition:background 0.2s,transform 0.15s;}
.calc-btn:hover{background:var(--gold2);transform:translateY(-1px);}
.empty-state{text-align:center;padding:40px 20px;color:var(--grey);}
.empty-state-icon{font-size:2.5rem;margin-bottom:12px;opacity:0.4;}
.empty-state-text{font-size:0.85rem;line-height:1.6;}
.prices-hero{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;}
.price-card{border-radius:8px;padding:20px;text-align:center;}
.price-card.call{background:linear-gradient(135deg,rgba(74,222,128,0.1),rgba(74,222,128,0.04));border:1px solid rgba(74,222,128,0.3);}
.price-card.put{background:linear-gradient(135deg,rgba(248,113,113,0.1),rgba(248,113,113,0.04));border:1px solid rgba(248,113,113,0.3);}
.price-label{font-size:0.65rem;font-weight:600;letter-spacing:0.2em;text-transform:uppercase;margin-bottom:8px;}
.price-card.call .price-label{color:var(--green);}
.price-card.put .price-label{color:var(--red);}
.price-value{font-family:'Playfair Display',serif;font-size:2rem;font-weight:900;}
.price-card.call .price-value{color:var(--green);}
.price-card.put .price-value{color:var(--red);}
.price-sub{font-size:0.7rem;color:var(--grey);margin-top:5px;}
.greeks-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:16px;}
.greek-card{background:var(--navy3);border:1px solid rgba(201,168,76,0.1);border-radius:5px;padding:12px;text-align:center;}
.greek-name{font-size:0.62rem;font-weight:600;letter-spacing:0.12em;text-transform:uppercase;color:var(--gold);margin-bottom:4px;}
.greek-symbol{font-family:'Playfair Display',serif;font-size:1.1rem;font-weight:900;color:var(--white);}
.greek-sub{font-size:0.62rem;color:var(--grey);margin-top:3px;}
.moneyness-badge{display:inline-block;padding:6px 14px;border-radius:3px;font-size:0.72rem;font-weight:700;margin-bottom:14px;}
.moneyness-badge.itm{background:rgba(74,222,128,0.15);border:1px solid rgba(74,222,128,0.3);color:var(--green);}
.moneyness-badge.atm{background:rgba(201,168,76,0.15);border:1px solid rgba(201,168,76,0.3);color:var(--gold2);}
.moneyness-badge.otm{background:rgba(248,113,113,0.15);border:1px solid rgba(248,113,113,0.3);color:var(--red);}
.chart-container{position:relative;height:260px;}
.calc-footer{margin-top:24px;padding-top:14px;border-top:1px solid rgba(201,168,76,0.1);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px;}
.brand{font-family:'Playfair Display',serif;font-size:1rem;font-weight:900;}
.brand span{color:var(--gold);}
.disclaimer{font-size:0.67rem;color:var(--grey);}
</style>
</head>
<body>
<div class="wrapper">
  <div class="calc-header">
    <div class="calc-tag">Calculator 11 ¬∑ Finingale</div>
    <h1 class="calc-title">Black-Scholes <span>Options</span></h1>
    <p class="calc-desc">Price European call and put options using the Black-Scholes model. Calculates all five Greeks ‚Äî Delta, Gamma, Theta, Vega, and Rho ‚Äî plus a full option value curve.</p>
  </div>
  <div class="calc-body">
    <div>
      <div class="panel">
        <div class="panel-title">Option Parameters</div>
        <div class="input-group">
          <label class="input-label">Current Stock Price (S)</label>
          <span class="input-hint">Current market price of the underlying asset</span>
          <div class="input-wrap"><span class="input-prefix">$</span><input type="number" id="S" class="field has-prefix" placeholder="e.g. 100" min="0" step="any"/></div>
          <div class="error-msg" id="err-S">Please enter a valid stock price</div>
        </div>
        <div class="input-group">
          <label class="input-label">Strike Price (K)</label>
          <span class="input-hint">Price at which the option can be exercised</span>
          <div class="input-wrap"><span class="input-prefix">$</span><input type="number" id="K" class="field has-prefix" placeholder="e.g. 105" min="0" step="any"/></div>
          <div class="error-msg" id="err-K">Please enter a valid strike price</div>
        </div>
        <div class="input-group">
          <label class="input-label">Time to Expiry</label>
          <span class="input-hint">Time remaining until option expiration</span>
          <div class="input-wrap"><input type="number" id="T" class="field has-suffix" placeholder="e.g. 0.5 (6 months)" min="0.01" step="any"/><span class="input-suffix">yrs</span></div>
          <div class="error-msg" id="err-T">Please enter a valid time to expiry</div>
        </div>
        <div class="input-group">
          <label class="input-label">Risk-Free Rate (r)</label>
          <span class="input-hint">Annual risk-free interest rate (e.g. treasury yield)</span>
          <div class="input-wrap"><input type="number" id="r" class="field has-suffix" placeholder="e.g. 5" min="0" step="any"/><span class="input-suffix">%</span></div>
          <div class="error-msg" id="err-r">Please enter a valid risk-free rate</div>
        </div>
        <div class="input-group" style="margin-bottom:16px;">
          <label class="input-label">Implied Volatility (œÉ)</label>
          <span class="input-hint">Annualised standard deviation of stock returns</span>
          <div class="input-wrap"><input type="number" id="sigma" class="field has-suffix" placeholder="e.g. 25" min="0.1" max="500" step="any"/><span class="input-suffix">%</span></div>
          <div class="error-msg" id="err-sigma">Please enter a valid volatility</div>
        </div>
        <button class="calc-btn" onclick="calculate()">Calculate ‚Üí</button>
      </div>
    </div>
    <div>
      <div class="panel">
        <div class="panel-title">Option Pricing Results</div>
        <div class="empty-state" id="empty-state">
          <div class="empty-state-icon">üìä</div>
          <div class="empty-state-text">Enter option parameters on the left<br/>and click <strong style="color:var(--gold)">Calculate</strong> to price the option.</div>
        </div>
        <div id="results-content" style="display:none;">
          <span class="moneyness-badge" id="moneyness-badge">‚Äî</span>
          <div class="prices-hero">
            <div class="price-card call">
              <div class="price-label">Call Option</div>
              <div class="price-value" id="res-call">‚Äî</div>
              <div class="price-sub">Right to BUY at strike</div>
            </div>
            <div class="price-card put">
              <div class="price-label">Put Option</div>
              <div class="price-value" id="res-put">‚Äî</div>
              <div class="price-sub">Right to SELL at strike</div>
            </div>
          </div>
          <div style="font-size:0.68rem;font-weight:600;letter-spacing:0.15em;text-transform:uppercase;color:var(--gold);margin-bottom:10px;">The Greeks</div>
          <div class="greeks-grid">
            <div class="greek-card"><div class="greek-name">Delta (Œî)</div><div class="greek-symbol" id="g-delta">‚Äî</div><div class="greek-sub">Price sensitivity</div></div>
            <div class="greek-card"><div class="greek-name">Gamma (Œì)</div><div class="greek-symbol" id="g-gamma">‚Äî</div><div class="greek-sub">Delta sensitivity</div></div>
            <div class="greek-card"><div class="greek-name">Theta (Œò)</div><div class="greek-symbol" id="g-theta">‚Äî</div><div class="greek-sub">Time decay / day</div></div>
            <div class="greek-card"><div class="greek-name">Vega (ŒΩ)</div><div class="greek-symbol" id="g-vega">‚Äî</div><div class="greek-sub">Vol sensitivity (1%)</div></div>
            <div class="greek-card"><div class="greek-name">Rho (œÅ)</div><div class="greek-symbol" id="g-rho">‚Äî</div><div class="greek-sub">Rate sensitivity (1%)</div></div>
            <div class="greek-card"><div class="greek-name">d‚ÇÅ / d‚ÇÇ</div><div class="greek-symbol" id="g-d1d2" style="font-size:0.85rem;">‚Äî</div><div class="greek-sub">BSM parameters</div></div>
          </div>
        </div>
      </div>
      <div class="panel" id="chart-panel" style="display:none;">
        <div class="panel-title">Option Value vs Stock Price</div>
        <div class="chart-container"><canvas id="optChart"></canvas></div>
      </div>
    </div>
  </div>
  <div class="calc-footer">
    <div class="brand">Fining<span>ale</span></div>
    <div class="disclaimer">For educational purposes only. European options only. Not financial advice.</div>
  </div>
</div>
<script>
// Standard normal CDF approximation
function normCDF(x) {
  const a1=0.254829592,a2=-0.284496736,a3=1.421413741,a4=-1.453152027,a5=1.061405429,p=0.3275911;
  const sign = x<0?-1:1; x=Math.abs(x)/Math.sqrt(2);
  const t=1/(1+p*x);
  const y=1-(((((a5*t+a4)*t)+a3)*t+a2)*t+a1)*t*Math.exp(-x*x);
  return 0.5*(1+sign*y);
}
function normPDF(x){return Math.exp(-0.5*x*x)/Math.sqrt(2*Math.PI);}

function bsm(S,K,T,r,sigma){
  const d1=(Math.log(S/K)+(r+0.5*sigma*sigma)*T)/(sigma*Math.sqrt(T));
  const d2=d1-sigma*Math.sqrt(T);
  const call=S*normCDF(d1)-K*Math.exp(-r*T)*normCDF(d2);
  const put=K*Math.exp(-r*T)*normCDF(-d2)-S*normCDF(-d1);
  // Greeks
  const delta_call=normCDF(d1), delta_put=normCDF(d1)-1;
  const gamma=normPDF(d1)/(S*sigma*Math.sqrt(T));
  const theta_call=(-S*normPDF(d1)*sigma/(2*Math.sqrt(T))-r*K*Math.exp(-r*T)*normCDF(d2))/365;
  const theta_put=(-S*normPDF(d1)*sigma/(2*Math.sqrt(T))+r*K*Math.exp(-r*T)*normCDF(-d2))/365;
  const vega=S*normPDF(d1)*Math.sqrt(T)/100;
  const rho_call=K*T*Math.exp(-r*T)*normCDF(d2)/100;
  const rho_put=-K*T*Math.exp(-r*T)*normCDF(-d2)/100;
  return{call,put,d1,d2,delta_call,delta_put,gamma,theta_call,theta_put,vega,rho_call,rho_put};
}

function showError(id,show){
  const el=document.getElementById('err-'+id),field=document.getElementById(id);
  if(!el)return;
  if(show){el.classList.add('show');if(field)field.classList.add('error');}
  else{el.classList.remove('show');if(field)field.classList.remove('error');}
}

let chartInstance=null;

function calculate(){
  const S=parseFloat(document.getElementById('S').value);
  const K=parseFloat(document.getElementById('K').value);
  const T=parseFloat(document.getElementById('T').value);
  const r=parseFloat(document.getElementById('r').value)/100;
  const sigma=parseFloat(document.getElementById('sigma').value)/100;
  let valid=true;
  if(!S||S<=0){showError('S',true);valid=false;}else showError('S',false);
  if(!K||K<=0){showError('K',true);valid=false;}else showError('K',false);
  if(!T||T<=0){showError('T',true);valid=false;}else showError('T',false);
  if(isNaN(r)||r<0){showError('r',true);valid=false;}else showError('r',false);
  if(!sigma||sigma<=0){showError('sigma',true);valid=false;}else showError('sigma',false);
  if(!valid)return;

  const res=bsm(S,K,T,r,sigma);
  const fmt2=n=>'$'+Math.abs(n).toFixed(4);
  const fmt4=n=>n.toFixed(4);

  let moneyness, mClass;
  const diff=((S-K)/K)*100;
  if(Math.abs(diff)<1){moneyness='At The Money (ATM)';mClass='atm';}
  else if(S>K){moneyness=`In The Money (ITM) ‚Äî ${diff.toFixed(1)}% above strike`;mClass='itm';}
  else{moneyness=`Out of The Money (OTM) ‚Äî ${Math.abs(diff).toFixed(1)}% below strike`;mClass='otm';}

  document.getElementById('empty-state').style.display='none';
  document.getElementById('results-content').style.display='block';
  document.getElementById('chart-panel').style.display='block';

  const mb=document.getElementById('moneyness-badge');
  mb.textContent=moneyness; mb.className='moneyness-badge '+mClass;
  document.getElementById('res-call').textContent='$'+res.call.toFixed(4);
  document.getElementById('res-put').textContent='$'+res.put.toFixed(4);
  document.getElementById('g-delta').textContent=fmt4(res.delta_call)+' / '+fmt4(res.delta_put);
  document.getElementById('g-gamma').textContent=fmt4(res.gamma);
  document.getElementById('g-theta').textContent=fmt4(res.theta_call)+'/day';
  document.getElementById('g-vega').textContent=fmt4(res.vega);
  document.getElementById('g-rho').textContent=fmt4(res.rho_call);
  document.getElementById('g-d1d2').textContent=res.d1.toFixed(4)+' / '+res.d2.toFixed(4);

  // Chart ‚Äî option value vs stock price
  const prices=[],callVals=[],putVals=[];
  const sMin=S*0.5, sMax=S*1.5;
  for(let s=sMin;s<=sMax;s+=(sMax-sMin)/40){
    const r2=bsm(s,K,T,r,sigma);
    prices.push('$'+s.toFixed(0));
    callVals.push(parseFloat(r2.call.toFixed(4)));
    putVals.push(parseFloat(r2.put.toFixed(4)));
  }
  const ctx=document.getElementById('optChart').getContext('2d');
  const gradG=ctx.createLinearGradient(0,0,0,260);
  gradG.addColorStop(0,'rgba(74,222,128,0.3)');
  gradG.addColorStop(1,'rgba(74,222,128,0.02)');
  const gradR=ctx.createLinearGradient(0,0,0,260);
  gradR.addColorStop(0,'rgba(248,113,113,0.3)');
  gradR.addColorStop(1,'rgba(248,113,113,0.02)');

  if(chartInstance)chartInstance.destroy();
  chartInstance=new Chart(ctx,{
    type:'line',
    data:{labels:prices,datasets:[
      {label:'Call Value',data:callVals,borderColor:'#4ade80',backgroundColor:gradG,borderWidth:2.5,fill:true,tension:0.4,pointRadius:0,pointHoverRadius:5},
      {label:'Put Value',data:putVals,borderColor:'#f87171',backgroundColor:gradR,borderWidth:2,fill:true,tension:0.4,pointRadius:0,pointHoverRadius:5}
    ]},
    options:{
      responsive:true,maintainAspectRatio:false,
      animation:{duration:700,easing:'easeInOutQuart'},
      interaction:{mode:'index',intersect:false},
      plugins:{
        legend:{labels:{color:'#8A95A3',font:{family:'DM Sans',size:11},boxWidth:12}},
        tooltip:{backgroundColor:'#0E1F3D',borderColor:'rgba(201,168,76,0.3)',borderWidth:1,titleColor:'#C9A84C',bodyColor:'#F8F5EE',padding:12,callbacks:{label:c=>' '+c.dataset.label+': $'+c.raw}}
      },
      scales:{
        x:{grid:{color:'rgba(255,255,255,0.04)'},ticks:{color:'#8A95A3',font:{family:'DM Sans',size:9},maxTicksLimit:10},title:{display:true,text:'Stock Price ($)',color:'#8A95A3',font:{family:'DM Sans',size:10}}},
        y:{grid:{color:'rgba(255,255,255,0.04)'},ticks:{color:'#8A95A3',font:{family:'DM Sans',size:10},callback:v=>'$'+v},title:{display:true,text:'Option Value ($)',color:'#8A95A3',font:{family:'DM Sans',size:10}}}
      }
    }
  });
}
document.querySelectorAll('.field').forEach(f=>f.addEventListener('keydown',e=>{if(e.key==='Enter')calculate();}));
</script>
</body>
</html>
