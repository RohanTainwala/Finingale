<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Martingale Strategy Simulator ‚Äî Finingale</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--navy:#0A1628;--navy2:#0E1F3D;--navy3:#162847;--gold:#C9A84C;--gold2:#E8C96B;--white:#F8F5EE;--grey:#8A95A3;--blue:#60a5fa;--green:#4ade80;--red:#f87171;--yellow:#fbbf24;}
body{font-family:'DM Sans',sans-serif;background:var(--navy);color:var(--white);min-height:100vh;padding:40px 24px;}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(201,168,76,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(201,168,76,0.03) 1px,transparent 1px);background-size:60px 60px;pointer-events:none;z-index:0;}
.wrapper{max-width:1080px;margin:0 auto;position:relative;z-index:1;}
.calc-header{margin-bottom:36px;}
.calc-tag{font-size:0.68rem;font-weight:600;letter-spacing:0.25em;text-transform:uppercase;color:var(--gold);display:flex;align-items:center;gap:10px;margin-bottom:10px;}
.calc-tag::before{content:'';width:22px;height:1px;background:var(--gold);}
.calc-title{font-family:'Playfair Display',serif;font-size:clamp(1.8rem,3.5vw,2.8rem);font-weight:900;line-height:1.1;margin-bottom:8px;}
.calc-title span{color:var(--gold);}
.calc-desc{font-size:0.88rem;color:var(--grey);font-weight:300;max-width:620px;line-height:1.75;}
.warning-banner{background:rgba(248,113,113,0.08);border:1px solid rgba(248,113,113,0.25);border-radius:6px;padding:14px 18px;margin-bottom:28px;font-size:0.8rem;color:var(--red);line-height:1.6;}
.warning-banner strong{color:var(--red);}
.calc-body{display:grid;grid-template-columns:370px 1fr;gap:20px;align-items:start;}
@media(max-width:820px){.calc-body{grid-template-columns:1fr;}}
.panel{background:var(--navy2);border:1px solid rgba(201,168,76,0.13);border-radius:8px;padding:28px;}
.panel+.panel{margin-top:20px;}
.panel-title{font-size:0.68rem;font-weight:600;letter-spacing:0.2em;text-transform:uppercase;color:var(--gold);margin-bottom:20px;padding-bottom:12px;border-bottom:1px solid rgba(201,168,76,0.12);}
.input-group{margin-bottom:20px;}
.input-label{font-size:0.7rem;font-weight:600;letter-spacing:0.1em;text-transform:uppercase;color:var(--grey);margin-bottom:6px;display:block;}
.input-hint{font-size:0.65rem;color:rgba(138,149,163,0.6);margin-bottom:6px;display:block;}
.input-wrap{position:relative;display:flex;align-items:center;}
.input-prefix{position:absolute;left:14px;font-size:0.88rem;font-weight:600;color:var(--gold);pointer-events:none;z-index:1;}
.input-suffix{position:absolute;right:14px;font-size:0.88rem;font-weight:500;color:var(--grey);pointer-events:none;z-index:1;}
.field{width:100%;padding:12px 14px;background:var(--navy3);border:1px solid rgba(201,168,76,0.18);border-radius:5px;color:var(--white);font-size:0.95rem;font-weight:500;font-family:'DM Sans',sans-serif;outline:none;transition:border-color 0.2s,box-shadow 0.2s;-moz-appearance:textfield;}
.field::-webkit-outer-spin-button,.field::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}
.field:focus{border-color:var(--gold);box-shadow:0 0 0 3px rgba(201,168,76,0.1);}
.field.has-prefix{padding-left:32px;}
.field.has-suffix{padding-right:40px;}
.field.error{border-color:var(--red);}
.error-msg{font-size:0.65rem;color:var(--red);margin-top:5px;display:none;}
.error-msg.show{display:block;}
.toggle-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-top:6px;}
.toggle-btn{padding:10px;border:1px solid rgba(201,168,76,0.18);background:transparent;color:var(--grey);font-size:0.75rem;font-family:'DM Sans',sans-serif;border-radius:4px;cursor:pointer;transition:all 0.18s;text-align:center;}
.toggle-btn.active{background:var(--gold);color:var(--navy);border-color:var(--gold);font-weight:700;}
.toggle-btn:hover:not(.active){border-color:var(--gold);color:var(--gold);}
.sim-btns{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px;}
.calc-btn{padding:14px;background:var(--gold);color:var(--navy);font-size:0.82rem;font-weight:700;font-family:'DM Sans',sans-serif;letter-spacing:0.08em;text-transform:uppercase;border:none;border-radius:5px;cursor:pointer;transition:background 0.2s,transform 0.15s;}
.calc-btn:hover{background:var(--gold2);transform:translateY(-1px);}
.calc-btn.secondary{background:transparent;border:1px solid rgba(201,168,76,0.3);color:var(--gold);}
.calc-btn.secondary:hover{background:rgba(201,168,76,0.08);}
.empty-state{text-align:center;padding:40px 20px;color:var(--grey);}
.empty-state-icon{font-size:2.5rem;margin-bottom:12px;opacity:0.4;}
.empty-state-text{font-size:0.85rem;line-height:1.6;}
.outcome-banner{padding:14px 18px;border-radius:6px;margin-bottom:16px;font-size:0.85rem;font-weight:600;display:flex;align-items:center;gap:10px;}
.outcome-banner.bust{background:rgba(248,113,113,0.1);border:1px solid rgba(248,113,113,0.3);color:var(--red);}
.outcome-banner.survived{background:rgba(74,222,128,0.1);border:1px solid rgba(74,222,128,0.3);color:var(--green);}
.results-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px;}
.result-card{background:var(--navy3);border:1px solid rgba(201,168,76,0.1);border-radius:5px;padding:14px;}
.result-label{font-size:0.62rem;font-weight:600;letter-spacing:0.12em;text-transform:uppercase;color:var(--grey);margin-bottom:5px;}
.result-value{font-family:'Playfair Display',serif;font-size:1.15rem;font-weight:700;color:var(--white);}
.result-value.good{color:var(--green);}
.result-value.bad{color:var(--red);}
.result-value.warn{color:var(--yellow);}
.result-sub{font-size:0.63rem;color:var(--grey);margin-top:2px;}
/* Bet log */
.bet-log{max-height:160px;overflow-y:auto;margin-top:10px;}
.bet-log::-webkit-scrollbar{width:4px;}
.bet-log::-webkit-scrollbar-thumb{background:rgba(201,168,76,0.3);border-radius:2px;}
.bet-row{display:flex;justify-content:space-between;align-items:center;padding:5px 8px;border-radius:3px;margin-bottom:3px;font-size:0.72rem;}
.bet-row.win{background:rgba(74,222,128,0.08);}
.bet-row.lose{background:rgba(248,113,113,0.08);}
.bet-num{color:var(--grey);width:30px;}
.bet-stake{color:var(--white);font-weight:600;}
.bet-result{font-weight:700;}
.bet-row.win .bet-result{color:var(--green);}
.bet-row.lose .bet-result{color:var(--red);}
.bet-balance{color:var(--gold2);font-weight:600;}
.chart-container{position:relative;height:260px;}
.calc-footer{margin-top:24px;padding-top:14px;border-top:1px solid rgba(201,168,76,0.1);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px;}
.brand{font-family:'Playfair Display',serif;font-size:1rem;font-weight:900;}
.brand span{color:var(--gold);}
.disclaimer{font-size:0.67rem;color:var(--grey);}
</style>
</head>
<body>
<div class="wrapper">
  <div class="calc-header">
    <div class="calc-tag">Calculator 14 ¬∑ Finingale</div>
    <h1 class="calc-title">Martingale <span>Simulator</span></h1>
    <p class="calc-desc">Simulate the Martingale betting strategy ‚Äî where you double your bet after every loss. See why this strategy sounds logical but almost always leads to ruin.</p>
  </div>

  <div class="warning-banner">
    ‚ö†Ô∏è <strong>Educational Warning:</strong> The Martingale strategy is mathematically dangerous. This simulator exists to demonstrate why it fails ‚Äî not to encourage its use. The risk of ruin is extremely high.
  </div>

  <div class="calc-body">
    <div>
      <div class="panel">
        <div class="panel-title">Simulation Parameters</div>
        <div class="input-group">
          <label class="input-label">Starting Bankroll</label>
          <span class="input-hint">Total capital available for betting</span>
          <div class="input-wrap"><span class="input-prefix">$</span><input type="number" id="bankroll" class="field has-prefix" placeholder="e.g. 1000" min="1" step="any"/></div>
          <div class="error-msg" id="err-bankroll">Please enter a valid bankroll</div>
        </div>
        <div class="input-group">
          <label class="input-label">Initial Bet Size</label>
          <span class="input-hint">Starting wager for the first round</span>
          <div class="input-wrap"><span class="input-prefix">$</span><input type="number" id="base-bet" class="field has-prefix" placeholder="e.g. 10" min="1" step="any"/></div>
          <div class="error-msg" id="err-base-bet">Must be less than bankroll</div>
        </div>
        <div class="input-group">
          <label class="input-label">Win Probability</label>
          <span class="input-hint">Chance of winning each round (e.g. 48.6% for roulette red/black)</span>
          <div class="input-wrap"><input type="number" id="win-prob" class="field has-suffix" placeholder="e.g. 48.6" min="1" max="99" step="any"/><span class="input-suffix">%</span></div>
          <div class="error-msg" id="err-win-prob">Please enter between 1 and 99</div>
        </div>
        <div class="input-group">
          <label class="input-label">Number of Rounds</label>
          <span class="input-hint">How many bets to simulate</span>
          <div class="input-wrap"><input type="number" id="rounds" class="field" placeholder="e.g. 100" min="10" max="1000" step="1"/></div>
          <div class="error-msg" id="err-rounds">Please enter between 10 and 1000</div>
        </div>
        <div class="input-group">
          <label class="input-label">Multiplier on Loss</label>
          <span class="input-hint">Classic Martingale doubles. Anti-Martingale doubles on wins.</span>
          <div class="toggle-grid">
            <button class="toggle-btn active" data-strat="martingale">Martingale (√ó2 loss)</button>
            <button class="toggle-btn" data-strat="anti">Anti-Martingale (√ó2 win)</button>
          </div>
        </div>
        <div class="input-group" style="margin-bottom:16px;">
          <label class="input-label">Table Limit (Optional)</label>
          <span class="input-hint">Max bet allowed ‚Äî kills Martingale strategy</span>
          <div class="input-wrap"><span class="input-prefix">$</span><input type="number" id="table-limit" class="field has-prefix" placeholder="e.g. 500 (or leave blank)" min="0" step="any"/></div>
        </div>
        <div class="sim-btns">
          <button class="calc-btn" onclick="simulate()">Simulate ‚Üí</button>
          <button class="calc-btn secondary" onclick="simulate()">Re-Simulate ‚Ü∫</button>
        </div>
      </div>
    </div>
    <div>
      <div class="panel">
        <div class="panel-title">Simulation Results</div>
        <div class="empty-state" id="empty-state">
          <div class="empty-state-icon">üé≤</div>
          <div class="empty-state-text">Set your parameters on the left<br/>and click <strong style="color:var(--gold)">Simulate</strong> to run the Martingale strategy.</div>
        </div>
        <div id="results-content" style="display:none;">
          <div class="outcome-banner" id="outcome-banner">‚Äî</div>
          <div class="results-grid">
            <div class="result-card">
              <div class="result-label">Final Balance</div>
              <div class="result-value" id="res-final">‚Äî</div>
              <div class="result-sub" id="res-pnl">‚Äî</div>
            </div>
            <div class="result-card">
              <div class="result-label">Rounds Played</div>
              <div class="result-value" id="res-rounds">‚Äî</div>
              <div class="result-sub" id="res-rounds-sub">‚Äî</div>
            </div>
            <div class="result-card">
              <div class="result-label">Win / Loss Record</div>
              <div class="result-value" id="res-wl">‚Äî</div>
              <div class="result-sub" id="res-wl-rate">‚Äî</div>
            </div>
            <div class="result-card">
              <div class="result-label">Max Bet Reached</div>
              <div class="result-value warn" id="res-max-bet">‚Äî</div>
              <div class="result-sub">Largest single wager</div>
            </div>
            <div class="result-card">
              <div class="result-label">Max Drawdown</div>
              <div class="result-value bad" id="res-drawdown">‚Äî</div>
              <div class="result-sub">Lowest point reached</div>
            </div>
            <div class="result-card">
              <div class="result-label">Longest Loss Streak</div>
              <div class="result-value bad" id="res-streak">‚Äî</div>
              <div class="result-sub">Consecutive losses</div>
            </div>
          </div>
          <div style="font-size:0.65rem;font-weight:600;letter-spacing:0.15em;text-transform:uppercase;color:var(--gold);margin-bottom:8px;">Bet Log</div>
          <div class="bet-log" id="bet-log"></div>
        </div>
      </div>
      <div class="panel" id="chart-panel" style="display:none;">
        <div class="panel-title">Balance Over Rounds</div>
        <div class="chart-container"><canvas id="martChart"></canvas></div>
      </div>
    </div>
  </div>
  <div class="calc-footer">
    <div class="brand">Fining<span>ale</span></div>
    <div class="disclaimer">For educational purposes only. Gambling is not investing. This tool demonstrates mathematical risk.</div>
  </div>
</div>
<script>
const fmt=n=>'$'+Math.round(n).toLocaleString('en-US');
let strategy='martingale', chartInstance=null;

document.querySelectorAll('[data-strat]').forEach(btn=>btn.addEventListener('click',function(){
  document.querySelectorAll('[data-strat]').forEach(b=>b.classList.remove('active'));
  this.classList.add('active'); strategy=this.dataset.strat;
}));

function showError(id,show){
  const el=document.getElementById('err-'+id),field=document.getElementById(id);
  if(!el)return;
  if(show){el.classList.add('show');if(field)field.classList.add('error');}
  else{el.classList.remove('show');if(field)field.classList.remove('error');}
}

function simulate(){
  const bankroll=parseFloat(document.getElementById('bankroll').value);
  const baseBet=parseFloat(document.getElementById('base-bet').value);
  const winProb=parseFloat(document.getElementById('win-prob').value)/100;
  const rounds=parseInt(document.getElementById('rounds').value);
  const tableLimit=parseFloat(document.getElementById('table-limit').value)||Infinity;
  let valid=true;
  if(!bankroll||bankroll<=0){showError('bankroll',true);valid=false;}else showError('bankroll',false);
  if(!baseBet||baseBet<=0||baseBet>=bankroll){showError('base-bet',true);valid=false;}else showError('base-bet',false);
  if(isNaN(winProb)||winProb<0.01||winProb>0.99){showError('win-prob',true);valid=false;}else showError('win-prob',false);
  if(!rounds||rounds<10||rounds>1000){showError('rounds',true);valid=false;}else showError('rounds',false);
  if(!valid)return;

  let balance=bankroll, bet=baseBet;
  let wins=0, losses=0, maxBet=baseBet, maxDrawdown=bankroll, longestStreak=0, currentStreak=0;
  let bust=false, roundsPlayed=0;
  const balanceHistory=[bankroll];
  const betLog=[];

  for(let r=1;r<=rounds;r++){
    if(balance<=0){bust=true;break;}
    const actualBet=Math.min(bet,balance,tableLimit);
    const won=Math.random()<winProb;
    if(won){
      balance+=actualBet; wins++;
      currentStreak=0;
      bet=strategy==='martingale'?baseBet:Math.min(bet*2,balance,tableLimit);
      betLog.push({round:r,stake:actualBet,result:'WIN',balance});
    } else {
      balance-=actualBet; losses++;
      currentStreak++;
      if(currentStreak>longestStreak)longestStreak=currentStreak;
      bet=strategy==='martingale'?Math.min(bet*2,balance,tableLimit):baseBet;
      betLog.push({round:r,stake:actualBet,result:'LOSE',balance});
    }
    if(actualBet>maxBet)maxBet=actualBet;
    if(balance<maxDrawdown)maxDrawdown=balance;
    balanceHistory.push(Math.max(0,balance));
    roundsPlayed=r;
    if(balance<=0){bust=true;break;}
  }

  const finalBalance=Math.max(0,balance);
  const pnl=finalBalance-bankroll;
  document.getElementById('empty-state').style.display='none';
  document.getElementById('results-content').style.display='block';
  document.getElementById('chart-panel').style.display='block';

  const banner=document.getElementById('outcome-banner');
  if(bust){banner.className='outcome-banner bust';banner.textContent='üíÄ BUST ‚Äî Bankroll depleted after '+roundsPlayed+' rounds';}
  else{banner.className='outcome-banner survived';banner.textContent='‚úÖ Survived all '+roundsPlayed+' rounds';}

  document.getElementById('res-final').textContent=fmt(finalBalance);
  document.getElementById('res-final').className='result-value '+(finalBalance>=bankroll?'good':'bad');
  document.getElementById('res-pnl').textContent=(pnl>=0?'+':'')+fmt(pnl)+' P&L';
  document.getElementById('res-rounds').textContent=roundsPlayed;
  document.getElementById('res-rounds-sub').textContent='of '+rounds+' planned';
  document.getElementById('res-wl').textContent=wins+'W / '+losses+'L';
  document.getElementById('res-wl-rate').textContent=(wins/(wins+losses)*100).toFixed(1)+'% win rate';
  document.getElementById('res-max-bet').textContent=fmt(maxBet);
  document.getElementById('res-drawdown').textContent=fmt(maxDrawdown);
  document.getElementById('res-streak').textContent=longestStreak+' losses';

  // Bet log
  const logDiv=document.getElementById('bet-log');
  logDiv.innerHTML=betLog.slice(-50).map(b=>`<div class="bet-row ${b.result==='WIN'?'win':'lose'}"><span class="bet-num">#${b.round}</span><span class="bet-stake">Bet: ${fmt(b.stake)}</span><span class="bet-result">${b.result}</span><span class="bet-balance">${fmt(b.balance)}</span></div>`).join('');
  logDiv.scrollTop=logDiv.scrollHeight;

  // Chart
  const ctx=document.getElementById('martChart').getContext('2d');
  const labels=balanceHistory.map((_,i)=>i);
  const gradLine=ctx.createLinearGradient(0,0,0,260);
  const color=finalBalance>=bankroll?'rgba(74,222,128':'rgba(248,113,113';
  gradLine.addColorStop(0,color+',0.4)');
  gradLine.addColorStop(1,color+',0.02)');
  const lineColor=finalBalance>=bankroll?'#4ade80':'#f87171';

  if(chartInstance)chartInstance.destroy();
  chartInstance=new Chart(ctx,{
    type:'line',
    data:{labels,datasets:[
      {label:'Balance',data:balanceHistory,borderColor:lineColor,backgroundColor:gradLine,borderWidth:2.5,fill:true,tension:0.2,pointRadius:0,pointHoverRadius:4},
      {label:'Starting Bankroll',data:Array(balanceHistory.length).fill(bankroll),borderColor:'rgba(201,168,76,0.5)',backgroundColor:'transparent',borderWidth:1.5,borderDash:[6,4],fill:false,pointRadius:0}
    ]},
    options:{
      responsive:true,maintainAspectRatio:false,
      animation:{duration:700,easing:'easeInOutQuart'},
      interaction:{mode:'index',intersect:false},
      plugins:{
        legend:{labels:{color:'#8A95A3',font:{family:'DM Sans',size:11},boxWidth:12}},
        tooltip:{backgroundColor:'#0E1F3D',borderColor:'rgba(201,168,76,0.3)',borderWidth:1,titleColor:'#C9A84C',bodyColor:'#F8F5EE',padding:12,callbacks:{title:i=>'Round '+i[0].label,label:c=>' '+c.dataset.label+': '+fmt(c.raw)}}
      },
      scales:{
        x:{grid:{color:'rgba(255,255,255,0.04)'},ticks:{color:'#8A95A3',font:{family:'DM Sans',size:10},maxTicksLimit:10},title:{display:true,text:'Round',color:'#8A95A3',font:{family:'DM Sans',size:10}}},
        y:{grid:{color:'rgba(255,255,255,0.04)'},ticks:{color:'#8A95A3',font:{family:'DM Sans',size:10},callback:v=>'$'+v.toLocaleString()}}
      }
    }
  });
}
document.querySelectorAll('.field').forEach(f=>f.addEventListener('keydown',e=>{if(e.key==='Enter')simulate();}));
</script>
</body>
</html>
